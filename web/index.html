<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICONIC FRONT</title>
</head>
<body>
    <h1>WebSocket Connection Example</h1>
    <p id="status">Connecting to WebSocket...</p>

    <script>
        // Replace this with a real user ID
        const userId = "user123"; 

        // Connect to the WebSocket server
        const socket = new WebSocket(`ws://localhost:8000/ws?user_id=${userId}`);

        // Event handler for when the connection is opened
        socket.onopen = function(event) {
            console.log("Connected to WebSocket");
            document.getElementById("status").textContent = "Connected to WebSocket";
        };

        // Event handler for when a message is received from the server (not needed in this case)
        socket.onmessage = function(event) {
            console.log("Message from server: ", event.data);
        };

        // Event handler for when the connection is closed
        socket.onclose = function(event) {
            console.log("Disconnected from WebSocket");
            document.getElementById("status").textContent = "Disconnected from WebSocket";
        };

        // Event handler for when an error occurs
        socket.onerror = function(error) {
            console.error("WebSocket error: ", error);
            document.getElementById("status").textContent = "WebSocket error";
        };

        // Optional: You can close the connection when the user leaves the page
        window.onbeforeunload = function() {
            socket.close();
        };
    </script>
</body>
</html>